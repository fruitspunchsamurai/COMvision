<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Project IRIS by fruitspunchsamurai</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/fruitspunchsamurai/COMvision">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/fruitspunchsamurai/COMvision/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/fruitspunchsamurai/COMvision/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title"> 
          <a href="http://s1367.photobucket.com/user/BrianSYC/media/Clear-Vision-315x851_zps7e30e243.jpg.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/Clear-Vision-315x851_zps7e30e243.jpg" border="0" alt=" photo Clear-Vision-315x851_zps7e30e243.jpg"/></a>
          <h1>Project IRIS</h1>
          <p>Singapore Polytechnic [MDP] [AUV] Computer Vision </p> 
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/fruitspunchsamurai">fruitspunchsamurai</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

        <h3>Welcome to Project IRIS</h3>

<p>Hello There! This is Brian from Singapore Polytechnic.~</p>  
 
<p>I am responsible for the computer vision modules for the Under Water Robot Project. This repository will contain all my codes to serve as backup as well as a guide for my juniors who will be taking over this project. I am trying my best to ensure that all my codes are heavily commented on to ensure easy understanding. Currently, my codes are written in Python. This is due to the fact that Python is an easy language to pick up as well as the fact that i will be needing this language to program my Raspberry Pi.</p> 
 
<p>Table of Contents:  <br> 
1.)=========Introduction=========<br>
1.0--------The Under Water Robot Project <br>
1.1--------The Competition <br>
1.2--------Research <br>
1.3--------Testing an ROV <br>
2.)======Simple Programming====== <br>
2.0--------Setting up the Raspberry Pi <br>
2.1--------Your First Code <br>
2.2--------GitHub <br>
2.3--------Blinking LEDs <br>
2.4--------I2C, SPI <br>
2.5--------Customising your Pi <br>
3.)====Basic Image Processing==== <br>
3.0--------Still Image Processing<br> 
3.1--------Camera Testing Logs
</p>  
  
<h3>[1.0] The Under Water Robot Project</h3>

<p>Project IRIS is a subset of the Under Water Robot Project. The main project is to [re]construct an Autonomous Underwater Vehicle(AUV). There are several groups of different disciplines working on this project and i am the leader of one of these groups(EEE). We are mainly in charge of the software aspects of the project.(Keyboard Warriors!) </p>  


<p>There are three people, including myself in the EEE group. Each of us have been assigned individual responsibilities as shown below: </p>  
 
<pre><code>Yong Boon ---> Compass & Depth Sensor
Wei Khang ----> Control Systems
Brian -----------> Computer Vision
</code></pre>  
 
<p>One of the AUVs.</p> 
 
<a href="http://s1367.photobucket.com/user/BrianSYC/media/IMG_0372_zps2f8a6770.jpg.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/IMG_0372_zps2f8a6770.jpg" border="0" alt=" photo IMG_0372_zps2f8a6770.jpg"/></a>
  
<p></p>  
 
<h3>[1.1] The Competition</h3> 
 
<p>The Singapore AUV Challenge 2013 was the most recent competition that our AUV participated in. The project was passed down to us just after the competition.(We got fourth!) Our AUV did not manage to make it through the gate and the motion of the robot was also very choppy.</p> 
 
<p>The video of the competition can be found here: </p> 
 
<iframe width="560" height="315" src="http://www.youtube.com/embed/H0mIRADzzik" frameborder="0" allowfullscreen></iframe> 
 
<p></p>  
  
<h3>[1.2] Getting Down To Business</h3> 
 
<p>Why does the AUV need computer vision? Well without computer vision, the AUV would not be able to track the black line on the floor of the pool, avoid obstacles and detect and knock the flare. We are basically giving our robot vision!</p>

<p>Based on my research for about a month, i have made several discoveries as well as conclusions. Firstly, all the knowledge needed on computer vision to complete this task successfully, is simply scratching the surface of the topic of computer vision. Secondly since our project uses Raspberry Pi/BeagleBone Black, it is vital to know C++,C,Python and Linux commands at your fingertips. Last but not least, do take time to source out suitable components for the project. Not all cameras are compatible with Raspberry Pi/BeagleBoneBlack.</p>
 
<pre><code>Here are some useful links to get you started:
Camera Compatibility ----> <a href="http://elinux.org/RPi_VerifiedPeripherals#USB_Webcams">http://elinux.org/RPi_VerifiedPeripherals#USB_Webcams</a> 
Python Programming ------> <a href="http://www.codecademy.com/tracks/python">http://www.codecademy.com/tracks/python</a>
Basic Image Processing --> <a href="http://www.cl.cam.ac.uk/projects/raspberrypi/tutorials/robot/image_processing/">http://www.cl.cam.ac.uk/projects/raspberrypi/tutorials/robot/image_processing/</a>
Blob Detection ---------------> <a href="http://www.cl.cam.ac.uk/projects/raspberrypi/tutorials/robot/blob_detection/">http://www.cl.cam.ac.uk/projects/raspberrypi/tutorials/robot/blob_detection/</a>
</code></pre>   
 
<p>Not as easy as you think.</p> 
 
<a href="http://s1367.photobucket.com/user/BrianSYC/media/IMG_0438_zps426999b1.jpg.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/IMG_0438_zps426999b1.jpg" border="0" alt=" photo IMG_0438_zps426999b1.jpg"/></a>
  
<p></p> 
 
<h3>[1.3] Pool Day!</h3>

<p>No, no one is swimming. Only the Remotely Operated Vehicle(ROV) is swimming. Our supervisors brought us down to pool to demonstrate the ROV. Everyone from all the groups was present and we sure had fun.</p> 
 
<p>[The Nuclear Briefcase. Press to launch.]</p>
<a href="http://s1367.photobucket.com/user/BrianSYC/media/IMG_0418_zps08e06409.jpg.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/IMG_0418_zps08e06409.jpg" border="0" alt="&quot;The Briefcase&quot; photo IMG_0418_zps08e06409.jpg"/></a>
 
<p>[In you go!~]</p>
<a href="http://s1367.photobucket.com/user/BrianSYC/media/IMG_0435_zps71e64174.jpg.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/IMG_0435_zps71e64174.jpg" border="0" alt=" photo IMG_0435_zps71e64174.jpg"/></a> 
 
<p>[The vision is cool right?!]</p> 
<a href="http://s1367.photobucket.com/user/BrianSYC/media/IMG_0434_zpsf6489d44.jpg.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/IMG_0434_zpsf6489d44.jpg" border="0" alt=" photo IMG_0434_zpsf6489d44.jpg"/></a>
<p></p> 
 
<h3>[2.0] Becoming a Keyboard Warrior</h3> 
 
                   <a href="http://3.bp.blogspot.com/-v0llcplZHx0/UUNFxf98eYI/AAAAAAAAEDo/7h-aipOWI-s/s640/KeyboardWarriors.jpg" target="_blank"><img src="http://3.bp.blogspot.com/-v0llcplZHx0/UUNFxf98eYI/AAAAAAAAEDo/7h-aipOWI-s/s640/KeyboardWarriors.jpg" border="0" alt=" photo KeyboardWarriors.jpg"/></a> 

<p>Before you start reading this, please ensure that you are at least familiar with Linux commands as well as Python Programming, else you wont fully understand what i will be typing here.</p> 
 
<p>Whether you are using a Raspberry Pi or BeagleBone, the first step that i recommend you do is to familiarize yourself with the board. If you are using the Raspberry Pi, you need to have an OS flashed into an SD card.(We used Raspbian Wheezy) And so here is a guide on the pure basics of operating your embedded system. </p> 
 
<p>{Starting up the Raspberry Pi}<br>
1.) Connect your Pi to a power outlet.(5V,1A Don't turn it on yet!)<br>
2.) Connect the rest of the necessary peripherals.(E.g. Mouse, Keyboard, Screen) <br>
3.) Power on the Pi and wait for it to prompt you for your login and password.(Default login is pi, Default password is raspberry) <br>
4.) If this is the very first time you are setting up the Pi, type in <code>sudo raspi-config</code> to configure your Pi.(Use the arrow keys to control the UI)<br>
5.) Type in <code>startx</code>. This code is to launch the GUI desktop.($60 mini computer. Cool right?)<br>
6.) You can access the terminal again by double clicking on the LXTerminal icon on the desktop. <br>
7.) Type in <code>sudo shutdown -h now</code> to shutdown your Pi.</p>
  
<p>Congratualations! You have learnt to start up, configure and shutdown the Raspberry Pi. (Which is equivalent to learning how to shutdown and startup the PC you are using to view this now.)</p> 
 
<h3>[2.1] Your First Code!</h3>  
 
<p>This is where the real fun begins! There are a few things you need to take note of first though. On your GUI, there should be 2 icons, IDLE and IDLE 3. What's the difference? IDLE operates on Python V2.7 while IDLE 3 operates on Python V3.2. The difference between these two versions of Python can be found <a href="http://docs.python.org/3/whatsnew/3.0.html">here.</a> </p>  
  
<p>I'd recommend using Python V2.7 because alot of essential libraries are available there. Not all of them have been ported over to Python V3.2 yet. And so here begins the tutorial.~</p>  
 
<p>{Typing and Running your First Code}<br>
1.) Run IDLE or IDLE 3. The Python Shell window will appear.<br>
2.) Click File -> New Window.<br>
3.) Write your code on the new window. <br>
4.) To save your file. File -> Save As -> "filename".py (remember to add .py at the end so the system will recognise as a python file)<br>
5.) On the code window click Run -> Run Module. Your code will run on the Python Shell window.</p> 
<p>Have fun playing around!</p> 

<h3>[2.2] GitHub</h3> 
 
<p>What is Github? Github is a very very useful tool for you to install on your embedded system. This is because it serves as a backup for your codes. An exmaple would be what you are looking at now. This website is hosted by github pages and if you scroll up and click the "View on GitHub" link, you will see all the codes for GPIO testing, Computer Vision, etc that i have left for you.</p>  
 
<p>A detailed tutorial on how to install and use GitHub can be found <a href="https://help.github.com/articles/set-up-git">here.</a></p> 
 
<h3>[2.3] Blinking Some LEDs</h3>  
 
<p>This will be the first time you will be using your embedded system to control elements in the outside world. It may be confusing trying to do it the first time round so i'll try to make this as precise and simple as possible.</p>  
 
<p>Firstly, you are going to need to have a few things besides your embedded system.</p>  
 
<p>Seem familiar?</p> 
<a href="http://s1367.photobucket.com/user/BrianSYC/media/IMG_0440_zpsfae79c05.jpg.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/IMG_0440_zpsfae79c05.jpg" border="0" alt=" photo IMG_0440_zpsfae79c05.jpg"/></a> 
 
<p>Connect it up!</p> 
<a href="http://s1367.photobucket.com/user/BrianSYC/media/b4c8cc96-0250-45f3-9d72-646ddfbbcdc1_zps9e2a5269.jpg.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/b4c8cc96-0250-45f3-9d72-646ddfbbcdc1_zps9e2a5269.jpg" border="0" alt=" photo b4c8cc96-0250-45f3-9d72-646ddfbbcdc1_zps9e2a5269.jpg"/></a> 
 
<p></p> 
 
<p>Done with the hardware side? Now it's time for the software side. For the Raspberry Pi, you need to import in some new libraries in order to utilize the GPIO pins. Dont worry, it's not rocket science. Ensure that your internet on the Pi is working before you type in the codes below.</p>
 
<pre><code>Type in these codes on the LXTerminal of your Pi: 
sudo apt-get update && sudo apt-get upgrade 
sudo apt-get install python-dev 
sudo apt-get install python-rpi.gpio
</code></pre>  
 
<p>Congratualations! You are done configuring your Pi to use it's GPIO pins. You can get the source code to blink an LED in the repository. ("GPIOtest") Make sure you understand the code!</p> 
 
<p>Pin Diagram Allocations</p> 
<a href="http://s1367.photobucket.com/user/BrianSYC/media/IMG_0442_zpseb2e340c.jpg.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/IMG_0442_zpseb2e340c.jpg" border="0" alt=" photo IMG_0442_zpseb2e340c.jpg"/></a> 
<p></p> 
  
<p>In your program, let's say you assign pin 11 to be an output pin. That pin you programmed will be GPIO no. 17. This is because pin 1 is the GPIO 3.3v, pin 2 is the GPIO 5v, pin 3 is the GPIO 2SDA, pin 4 is the GPIO 5V, etc...</p> 
 
<p>Ensure that when you connect up the wires of your LED test kit to your Pi, do NOT short circuit any of the pins together. (It could damage the board)</p> 
 
<p>Hmm? The program in the repository has an error message when you run it in the python shell? That's because you need to run the program as a root user!</p>
 
<pre><code>Open your LXTerminal and type these in: 
cd /home/pi/"Just list the directory path to where you saved the .py program to" 
sudo python GPIOtest.py
</code></pre> 

<p>If you still need more documentation, you can find it <a href="http://www.cl.cam.ac.uk/projects/raspberrypi/tutorials/robot/cheat_sheet/">here.</a></p> 
 
<h3>[2.4] Enabling I2C and SPI</h3>  
 
<p>So you have configured your Pi, blinked some LEDs and have a clear vision as to what needs to be done? Nice work!</p> 
 
<p>Before we can start to use external devices such as webcams or even another Arduino board, it is important to enable I2C and SPI protocols. What are they? I2C stands for Inter Integrated Circuit Communications while SPI stands for Serial-Peripheral-Interface. They are both communication protocols that allow a microcomputer to link to other micros or integrated circuits. Unfortunately, these protocols are blacklisted on the Raspberry Pi by default so we will need to fix that.</p>  
 
<p>Getting rid of the Blacklist: </p> 
<pre><code>Type in these codes on the LXTerminal of your Pi: 
sudo nano /etc/modprobe.d/raspi-blacklist.conf 
(Add a # in front of both the blacklisted lines) 
(Save and exit file) 
</code></pre>  
    
<p>Enable I2C</p> 
<pre><code>Type in these codes on the LXTerminal of your Pi: 
sudo nano /etc/modules 
(Add in i2c-dev below the last line) 
(Save and exit file) 
(Reboot Pi)
</code></pre>  
     
<p>Installing I2C tools: </p>  
<pre><code>Type in these codes on the LXTerminal of your Pi: 
sudo apt-get update
sudo apt-get install i2c-tools
</code></pre>   
 
<h3>[2.5] Beauty is in the Pi of the Beholder...</h3>   
 
<p>Hey there! Be sure to customize your Pi however you see fit! There are a ton of ways to customise your Pi and i think it will be a good idea to invest some time into it since you will be with it for some period of time.</p> 
 
<p>Yeaaaaaaaaaa...!</p>  
 
<a href="http://s1367.photobucket.com/user/BrianSYC/media/2013-02-10-081325_1920x1200_scrot_zpsdc170c4a.png.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/2013-02-10-081325_1920x1200_scrot_zpsdc170c4a.png" border="0" alt=" photo 2013-02-10-081325_1920x1200_scrot_zpsdc170c4a.png"/></a> 
 
<p>Looks nice? No?</p> 
 
<p>So you're probably wondering how to take screenshots. You can do this by installing a program called "Scrot". With scrot you can take screenshots. This will be handy for picture documentation like i was doing.</p> 
 
<pre><code>Type in these codes on the LXTerminal of your Pi: 
sudo apt-get install scrot 
(Type in scrot in terminal to get a screenshot)
</code></pre> 
 
<p>Have fun!!</p>

<h3>[3.0] Simple Image Processing (Still images)</h3>   
 
<p>*This section only applies to webcams*</p>
 
<p>This will be the first time you will be trying to do something related to image processing! Excited? Before we can start, several conditions need to be met first. First, we are going to need the appropriate libraries to be imported to the processor board. We also have to ensure that the camera is able to interface with the processor board through I2C. For additional information on enabling I2C on your Pi, you go can <a href="http://quick2wire.com/articles/physical-python-part-1/">here.</a></p> 
 
<p>How does image processing work?</p>
 
<p></p>
 
<a href="http://s1367.photobucket.com/user/BrianSYC/media/Flowww_zps2421821b.jpg.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/Flowww_zps2421821b.jpg" border="0" alt=" photo Flowww_zps2421821b.jpg"/></a>
 
<p></p> 
 
<p>From the flowchart:  <br>
1) Webcam captures still image <br> 
2) Image is displayed on screen <br> 
3) Loop in program checks for pixels with Red Green Blue(RGB) ratio of more than 40 : 90 : 90 <br>
4) If a pixel's RGB ratio is not more than 40 : 90 : 90, pixel is changed into Cyan 0 : 255 : 255 <br>
5) New processed image is displayed on screen
</p>   
 
<p>*Do take note! The lower the resolution, the faster the processing!*</p>
 
<p>There is a code in the repository for this (CAMtest). Do take a look at it and run it!</p> 
 
<h3>[3.1] Camera Testing Logs</h3>  
 
<p>First test [Creative Ltd webcam Notebook Ultra]</p>
  
<p>Camera was able to be detected by Raspberry Pi.</p>  
 
<a href="http://s1367.photobucket.com/user/BrianSYC/media/2013-02-10-085806_1920x1200_scrot_zpsc9a56ce4.png.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/2013-02-10-085806_1920x1200_scrot_zpsc9a56ce4.png" border="0" alt=" photo 2013-02-10-085806_1920x1200_scrot_zpsc9a56ce4.png"/></a>
<p></p> 
 
<p>Able to set up camera in specific resolutions.</p> 
 
<a href="http://s1367.photobucket.com/user/BrianSYC/media/2013-02-10-093156_1920x1200_scrot_zpse76a2cac.png.html" target="_blank"><img src="http://i1367.photobucket.com/albums/r794/BrianSYC/2013-02-10-093156_1920x1200_scrot_zpse76a2cac.png" border="0" alt=" photo 2013-02-10-093156_1920x1200_scrot_zpse76a2cac.png"/></a>  
<p></p>
 
<p>However Camera was unable to perform image capturing. A black viewer window appears and then disappears within 2 seconds.</p> 
  
<p>Overall testing failed.</p>

 
<p></p>
<h1>                                   Good Luck!</h1> 
<p>                      and thank you very hamnida for reading</p>
 
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
